From 69d0f35eb84a80773d6a1f7a7a3e1de8fd066791 Mon Sep 17 00:00:00 2001
From: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date: Thu, 13 Dec 2018 15:25:32 +0100
Subject: [PATCH 147/151] panfrost: Don't skip clearing the caches for now, it
 causes artifacts atm

Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
---
 src/gallium/drivers/panfrost/pan_context.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/gallium/drivers/panfrost/pan_context.c b/src/gallium/drivers/panfrost/pan_context.c
index decae20..7e555ed 100644
--- a/src/gallium/drivers/panfrost/pan_context.c
+++ b/src/gallium/drivers/panfrost/pan_context.c
@@ -1468,14 +1468,14 @@ panfrost_submit_frame(struct panfrost_context *ctx, bool flush_immediate)
                 {
                         .jc = ctx->set_value_job,
                         .atom_number = vt_atom,
-                        .core_req = BASE_JD_REQ_CS | BASE_JD_REQ_T | BASE_JD_REQ_CF | BASE_JD_REQ_COHERENT_GROUP | BASEP_JD_REQ_EVENT_NEVER | BASE_JD_REQ_SKIP_CACHE_END,
+                        .core_req = BASE_JD_REQ_CS | BASE_JD_REQ_T | BASE_JD_REQ_CF | BASE_JD_REQ_COHERENT_GROUP | BASEP_JD_REQ_EVENT_NEVER,
                 },
                 {
                         .jc = panfrost_fragment_job(ctx),
                         .nr_extres = 1,
                         .extres_list = (u64)framebuffer,
                         .atom_number = allocate_atom(),
-                        .core_req = BASE_JD_REQ_FS | BASE_JD_REQ_SKIP_CACHE_START,
+                        .core_req = BASE_JD_REQ_FS,
                 },
         };
 
-- 
2.7.4

