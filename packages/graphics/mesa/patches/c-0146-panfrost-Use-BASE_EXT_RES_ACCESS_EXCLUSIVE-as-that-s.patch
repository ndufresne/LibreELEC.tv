From b22130c7fba5ab69c5d2369e5a373234e6cb1983 Mon Sep 17 00:00:00 2001
From: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date: Thu, 13 Dec 2018 15:24:48 +0100
Subject: [PATCH 146/151] panfrost: Use BASE_EXT_RES_ACCESS_EXCLUSIVE as that's
 what drm_gem_fb_prepare_fb expects

Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
---
 src/gallium/drivers/panfrost/pan_context.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/gallium/drivers/panfrost/pan_context.c b/src/gallium/drivers/panfrost/pan_context.c
index d7b672b..decae20 100644
--- a/src/gallium/drivers/panfrost/pan_context.c
+++ b/src/gallium/drivers/panfrost/pan_context.c
@@ -1459,7 +1459,7 @@ panfrost_submit_frame(struct panfrost_context *ctx, bool flush_immediate)
         /* XXX: flush_immediate was causing lock-ups wrt readpixels in dEQP. Investigate. */
 
         base_external_resource framebuffer[] = {
-                {.ext_resource = ((struct panfrost_resource *) ctx->pipe_framebuffer.cbufs[0]->texture)->gpu[0] | (BASE_EXT_RES_ACCESS_SHARED & LOCAL_PAGE_LSB)},
+                {.ext_resource = ((struct panfrost_resource *) ctx->pipe_framebuffer.cbufs[0]->texture)->gpu[0] | (BASE_EXT_RES_ACCESS_EXCLUSIVE & LOCAL_PAGE_LSB)},
         };
 
         int vt_atom = allocate_atom();
-- 
2.7.4

